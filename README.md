# Labelme DAS
本项目基于[labelme](https://github.com/labelmeai/labelme)二次开发，用于时空2D数据标注（基于DAS传感数据开发）。运行和使用方法请参考[原始项目](./RAW.md)。

## 修改内容
- 支持X、Y轴独立缩放，方便标注时空数据，按住`Ctrl`键为X轴缩放，按住`Shift`键为Y轴缩放，按住`Ctrl+Shift`键为X、Y轴同时缩放。此外，调大了合法缩放倍数，方便标注大数据量的时空数据。
- X轴视为时间轴，Y轴视为空间轴。在图像上方显示时间坐标轴下方显示当前鼠标位置对应时间点和y轴坐标，方便确认标注点的时间位置。
- 重构画布渲染逻辑，保持标注图案和十字准线在屏幕上渲染的大小不变，方便在高倍率缩放下标注。
- 增加配置自动保存功能，支持自动保存标注配置，避免重复设置。
- 读取纯二进制数据文件并映射为图片，要求二进制文件存储格式第一个维度为时间，第二个维度为空间的数据二维数组拉平后的一维数组。需要通过文件名指定数据的额外信息：`起始时间戳_结束时间戳_空间维度(_数据格式).dat`，如`1710930964750_1710930974750_100_>i2.dat`。其中数据格式是可选参数，为numpy数据类型。为了兼容不同操作系统，可以用`l-`和`b-`代替`<`和`>`，如`b-i2`表示大端2字节整数，`<f4`表示小端4字节浮点数，为默认为`<i2`。
- 修改亮度对比度调节功能为颜色映射调节功能，支持绝对值和对数变换，支持热力图颜色映射和灰度图映射，支持映射范围调节。
- 同文件夹下的数据视为同一场景不同时间的数据，同文件夹下的所有标注数据保存在同一文件中，保存的标注数据将X轴坐标替换为时间戳。
- 每张数据图上会显示所有在改文件时间范围内的标注数据。方便查看和修改时间上有重叠的标注数据，以便处理两个时间段之间的数据。
- 修改创建矩形框默认快捷键为`R`，创建完成之后自动且为编辑模式。

## 界面展示
![labelme_das](./examples/instance_segmentation/.readme/das.png)

